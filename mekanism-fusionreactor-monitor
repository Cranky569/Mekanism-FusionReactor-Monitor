-- Config
local reactorName = "Reactor 1"  -- ändern je nach Reaktor
local receiverID  = 0            -- Port des zentralen Computers (Receiver)

-- Peripherals
local mon     = peripheral.find("monitor")
local reactor = peripheral.find("fusionReactorLogicAdapter")
local modem   = peripheral.find("modem")  -- sucht automatisch das erste Modem

if not mon then error("Monitor not found!") end
if not reactor then error("Fusion Reactor Logic Adapter not found!") end
if not modem then error("Modem not found!") end

-- Öffne den Modem-Port für Kommunikation
modem.open(receiverID)

-- Setup Monitor
mon.setTextScale(1)
mon.clear()

-- Funktion zum zentrierten Schreiben
local function writeCentered(row, text)
    local w,_ = mon.getSize()
    local x = math.floor((w - #text) / 2) + 1
    mon.setCursorPos(x,row)
    mon.write(text)
end

-- Hauptloop
while true do
    mon.clear()
    local ok, value = pcall(function() return reactor.getProductionRate() end)
    local feValue
    if ok then
        feValue = value / 2.5 -- J -> FE
        writeCentered(1, reactorName .. ": " .. string.format("%.2f FE", feValue))
        -- Sende Wert an zentralen Computer
        modem.transmit(receiverID, 0, {name = reactorName, value = feValue})
    else
        writeCentered(1, reactorName .. ": Error")
    end
    sleep(2)
end
