-- Config
local reactorName = "Reactor 1"  -- Ã¤ndern je nach Reaktor
local modemSide   = "back"       -- Seite, an der das Modem angeschlossen ist
local receiverID  = 2            -- ID des zentralen Computers

-- Peripherals
local mon     = peripheral.find("monitor")
local reactor = peripheral.find("fusionReactorLogicAdapter")
local modem   = peripheral.find("modem")

if not mon then error("Monitor not found!") end
if not reactor then error("Fusion Reactor Logic Adapter not found!") end
if not modem then error("Modem not found!") end

-- Setup Monitor
mon.setTextScale(1)
mon.clear()

-- Funktion zum zentrierten Schreiben
local function writeCentered(row, text)
    local w,_ = mon.getSize()
    local x = math.floor((w - #text) / 2) + 1
    mon.setCursorPos(x,row)
    mon.write(text)
end

while true do
    mon.clear()
    local ok, value = pcall(function() return reactor.getProductionRate() end)
    local feValue
    if ok then
        feValue = value / 2.5 -- J -> FE
        writeCentered(1, reactorName .. ": " .. string.format("%.2f FE", feValue))
        -- Sende Wert an zentralen Computer
        modem.transmit(receiverID, 0, {name = reactorName, value = feValue})
    else
        writeCentered(1, reactorName .. ": Error")
    end
    sleep(2)
end
